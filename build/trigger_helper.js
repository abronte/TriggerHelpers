// Generated by CoffeeScript 1.6.2
(function() {
  var Logger, Request, isTrigger, root, _base, _ref;

  root = (_ref = (_base = typeof exports !== "undefined" && exports !== null ? exports : window).forge) != null ? _ref : _base.forge = {};

  isTrigger = function() {
    return root.forge !== void 0;
  };

  root.isTrigger = isTrigger;

  Logger = (function() {
    var enabled, log, logLevel;

    isTrigger = false;

    logLevel = 5;

    enabled = true;

    log = function(msg, level) {
      if (enabled) {
        if (isTrigger) {
          return root.forge.logging.log(msg, eval("forge.logging." + level.toUpperCase()));
        } else {
          return console.log("[" + level.toUpperCase() + "] " + msg);
        }
      }
    };

    function Logger() {
      if (root.forge !== void 0) {
        isTrigger = true;
        root.onerror = function(e, u, l) {
          return log(e + " on line " + l, "error");
        };
      }
    }

    Logger.prototype.enabled = function(set) {
      if (set !== void 0) {
        enabled = set;
      }
      return enabled;
    };

    Logger.prototype.level = function(level) {
      if (level !== void 0) {
        logLevel = level;
      }
      return logLevel;
    };

    Logger.prototype.critical = function(msg) {
      if (logLevel >= 1) {
        return log(msg, "critical");
      }
    };

    Logger.prototype.error = function(msg) {
      if (logLevel >= 2) {
        return log(msg, "error");
      }
    };

    Logger.prototype.info = function(msg) {
      if (logLevel >= 3) {
        return log(msg, "info");
      }
    };

    Logger.prototype.warning = function(msg) {
      if (logLevel >= 4) {
        return log(msg, "warning");
      }
    };

    Logger.prototype.debug = function(msg) {
      if (logLevel >= 5) {
        return log(msg, "debug");
      }
    };

    return Logger;

  })();

  root.log = new Logger;

  Request = (function() {
    isTrigger = false;

    function Request() {
      if (root.forge !== void 0) {
        isTrigger = true;
      }
    }

    Request.prototype.get = function(url, callback) {
      if (isTrigger) {
        return root.forge.request.get(url, callback);
      } else {
        return $.ajax({
          type: "GET",
          url: url,
          dataType: "jsonp",
          processData: false,
          success: callback
        });
      }
    };

    Request.prototype.post = function(url, body, callback) {
      if (isTrigger) {
        return root.forge.request.ajax({
          type: "POST",
          url: url,
          data: body,
          success: callback
        });
      } else {
        return $.ajax({
          type: "POST",
          url: url,
          data: body,
          dataType: "jsonp",
          processData: false,
          success: callback
        });
      }
    };

    Request.prototype.ajax = function(params) {
      if (isTrigger) {
        return root.forge.request.ajax(params);
      } else {
        return $.ajax(params);
      }
    };

    return Request;

  })();

  root.request = new Request;

}).call(this);
